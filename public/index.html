<!DOCTYPE html>
<html>
<head>
	<title>CAMT LogIn</title>
	<!-- CSS -->
	<link rel="stylesheet" href="assets/css/reset.css" type="text/css">
	<link rel="stylesheet" href="assets/css/style.css" type="text/css">
	<!-- FONT -->
	<link href="https://fonts.googleapis.com/css?family=Oswald" rel="stylesheet">
</head>
<body id="logInBody">
	<div id="container">
		
		<section id="logInSection">
			<div>
				<h1 id="CAMT">CAMT</h1>
				<input type="text" name="username" class="logInImput" placeholder="username">
				<input type="text" name="password" class="logInImput" placeholder="password">
				<button id="Go">Train</button>
			</div>

			<div>
				<p id="invitation">Not having an account is not an excuse. 
					<button id="signUp">Sing up</button> for full access or continue as a <a href="../views/layouts/mainProfile.handlebars">guest</a>.
				</p>
			</div>
		</section>

	</div>

	<!-- The Modal -->
	<div id="myModal" class="modal">
	  <!-- Modal content -->
	  <div class="modal-content">
	    <span class="close">&times;</span><br>

	    <form id="signUpForm">
	    	Username:<br>
	    	<input id="nameInput" class="info" type="text" name="username" placeholder="Username" val="">
  			<br>
  			City:<br>
  			<input id="cityInput" class="info" type="text" name="city" placeholder="City" val="">
  			<br>
  			Zipcode:<br>
  			<input id="zipcodeInput" class="info" type="text" name="zipcode" placeholder="Zipcode" val="">
  			<br>
  			New Password:<br>
  			<input id="passwordInput" class="info" type="text" name="password" placeholder="Password" val="">
  			<br>
  			Verify Password:<br>
  			<input id="password2Input" class="info" type="text" name="password" placeholder="Password" val="">
  			<br>
	    </form>
	    <button id="modalSubmit">Submit</button>
	    <p id="pleaseComplete">Please complete all fields</p>
	  </div>

	</div>
	
	<!-- JQuery -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	
	<!-- LogIn JS logic -->
	<script>

		$(document).ready(function() {
			$("#pleaseComplete").hide();

			// MODAL
			var modal = document.getElementById('myModal');
			var btn = document.getElementById("signUp");
			var span = document.getElementsByClassName("close")[0]; 
			btn.onclick = function() {
			    modal.style.display = "block";
			}

			span.onclick = function() {
			    modal.style.display = "none";
			}

			window.onclick = function(event) {
			    if (event.target == modal) {
			        modal.style.display = "none";
			    }
			}

			$("#modalSubmit").on("click", function() {
		      event.preventDefault();

		    	if ($("#nameInput").val() != ""
		    		&& $("#cityInput").val() != ""
		    		&& $("#zipcodeInput").val() != ""
		    		&& $("#passwordInput").val() != ""
		    		&& $("#password2Input").val() != "") {
		    		
		    		var newUser = {
				        name: $("#nameInput").val(),
				        city: $("#cityInput").val(),
				        zipcode: $("#zipcodeInput").val(),
				        password: $("#passwordInput").val()
			     	};
			     	
			     	$("#pleaseComplete").hide();

			     	// POST USER INFO
			   		$.post("/api/account", newUser);
			   		
			     	// Redirect to profile 
			     	window.location.href="../views/layouts/mainProfile.handlebars";

		    	} else {
		    		$("#pleaseComplete").show();
		    	}
		    });
	   	});
	</script>
</body>
</html>